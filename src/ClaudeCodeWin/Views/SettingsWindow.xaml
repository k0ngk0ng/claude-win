<Window x:Class="ClaudeCodeWin.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="设置 - Claude Code for Windows"
        Height="650" Width="700"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundDark}"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="环境变量配置"
                       FontSize="24" FontWeight="Bold"
                       Foreground="{StaticResource TextPrimary}"/>
            <TextBlock Text="配置 Claude Code 所需的 ANTHROPIC 环境变量"
                       Foreground="{StaticResource TextSecondary}"
                       Margin="0,4,0,0"/>
        </StackPanel>

        <!-- 设置列表 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="SettingsPanel">

                <!-- API 配置分组 -->
                <Border Background="{StaticResource BackgroundMedium}"
                        CornerRadius="8" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="API 配置" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource AccentColor}" Margin="0,0,0,12"/>

                        <!-- ANTHROPIC_API_KEY -->
                        <StackPanel Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ANTHROPIC_API_KEY" FontWeight="Medium"
                                           Foreground="{StaticResource TextPrimary}"/>
                                <TextBlock Text=" *" Foreground="Red"/>
                            </StackPanel>
                            <TextBlock Text="您的 Anthropic API 密钥"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <PasswordBox x:Name="ApiKeyBox"
                                         Background="{StaticResource BackgroundLight}"
                                         Foreground="{StaticResource TextPrimary}"
                                         BorderBrush="{StaticResource BorderColor}"
                                         Padding="8,6"/>
                        </StackPanel>

                        <!-- ANTHROPIC_BASE_URL -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="ANTHROPIC_BASE_URL" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="自定义 API 端点 URL（留空使用默认）"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="BaseUrlBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <!-- ANTHROPIC_MODEL -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="ANTHROPIC_MODEL" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="使用的模型名称（如 claude-sonnet-4-20250514）"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="ModelBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <!-- ANTHROPIC_SMALL_FAST_MODEL -->
                        <StackPanel>
                            <TextBlock Text="ANTHROPIC_SMALL_FAST_MODEL" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="用于快速任务的小模型"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="SmallFastModelBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- 网络配置分组 -->
                <Border Background="{StaticResource BackgroundMedium}"
                        CornerRadius="8" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="网络配置" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource AccentColor}" Margin="0,0,0,12"/>

                        <!-- ANTHROPIC_PROXY -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="ANTHROPIC_PROXY" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="HTTP 代理地址（如 http://127.0.0.1:7890）"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="ProxyBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <!-- ANTHROPIC_TIMEOUT -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="ANTHROPIC_TIMEOUT" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="API 请求超时时间（秒）"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="TimeoutBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <!-- ANTHROPIC_MAX_RETRIES -->
                        <StackPanel>
                            <TextBlock Text="ANTHROPIC_MAX_RETRIES" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="最大重试次数"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <TextBox x:Name="MaxRetriesBox" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- 功能开关分组 -->
                <Border Background="{StaticResource BackgroundMedium}"
                        CornerRadius="8" Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="功能开关" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource AccentColor}" Margin="0,0,0,12"/>

                        <CheckBox x:Name="DisableCacheCheck" Content="禁用缓存 (ANTHROPIC_DISABLE_CACHE)"
                                  Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                        <CheckBox x:Name="DisableTelemetryCheck" Content="禁用遥测 (ANTHROPIC_DISABLE_TELEMETRY)"
                                  Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                        <CheckBox x:Name="DisableUpdateCheckCheck" Content="禁用更新检查 (ANTHROPIC_DISABLE_UPDATE_CHECK)"
                                  Foreground="{StaticResource TextPrimary}"/>
                    </StackPanel>
                </Border>

                <!-- 调试配置分组 -->
                <Border Background="{StaticResource BackgroundMedium}"
                        CornerRadius="8" Padding="16">
                    <StackPanel>
                        <TextBlock Text="调试配置" FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource AccentColor}" Margin="0,0,0,12"/>

                        <CheckBox x:Name="DebugCheck" Content="启用调试模式 (ANTHROPIC_DEBUG)"
                                  Foreground="{StaticResource TextPrimary}" Margin="0,0,0,12"/>

                        <StackPanel>
                            <TextBlock Text="ANTHROPIC_LOG_LEVEL" FontWeight="Medium"
                                       Foreground="{StaticResource TextPrimary}"/>
                            <TextBlock Text="日志级别"
                                       Foreground="{StaticResource TextSecondary}" FontSize="12" Margin="0,2,0,4"/>
                            <ComboBox x:Name="LogLevelCombo"
                                      Background="{StaticResource BackgroundLight}"
                                      Foreground="{StaticResource TextPrimary}">
                                <ComboBoxItem Content=""/>
                                <ComboBoxItem Content="debug"/>
                                <ComboBoxItem Content="info"/>
                                <ComboBoxItem Content="warn"/>
                                <ComboBoxItem Content="error"/>
                            </ComboBox>
                        </StackPanel>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- 按钮区域 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal"
                    HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="取消" Width="100"
                    Style="{StaticResource ModernButton}"
                    Background="{StaticResource BackgroundLight}"
                    Margin="0,0,10,0"
                    Click="CancelButton_Click"/>
            <Button Content="保存" Width="100"
                    Style="{StaticResource ModernButton}"
                    Click="SaveButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
